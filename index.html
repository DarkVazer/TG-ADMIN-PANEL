<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Админ Панель - Telegram Bot Manager</title>
    <link rel="stylesheet" href="assets/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Загрузка...</div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="appContainer" class="app-container">
        <!-- Mobile Overlay -->
        <div class="mobile-overlay" id="mobileOverlay"></div>
    
    <!-- Страница логина -->
    <div id="login" class="login-page">
        <!-- Animated background -->
        <div class="login-background">
            <!-- Grid overlay -->
            <div class="grid-overlay"></div>
            
            <!-- Floating symbols -->
            <div class="floating-symbols" id="floatingSymbols"></div>
            
            <!-- Animated text overlay -->
            <div class="login-text-overlay">
                <div class="typing-text" id="typingText"></div>
                <div class="tech-info">
                    Система управления Telegram ботами • Powered by AI • v2.0
                </div>
            </div>
        </div>
        
        <div class="login-card">
            <h1 class="login-title">Админ Панель</h1>
            <p class="login-subtitle">Удобство в простоте</p>
            <h2 class="login-description">Добро пожаловать!</h2>
            
            <form class="login-form" id="loginForm">
                <div class="form-group">
                    <label for="email" class="form-label">Почтовый адрес</label>
                    <input type="email" id="email" class="form-input" placeholder="example@mail.com" required>
                </div>
                
                <div class="form-group">
                    <label for="password" class="form-label">Пароль</label>
                    <input type="password" id="password" class="form-input" placeholder="Пароль" required>
                    <div class="login-caution">
                        Используйте пароль состоящий из 8 и более символов разных регистров
                    </div>
                </div>
                
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 16px;">Войти</button>
            </form>
            
            <div class="login-help">
                <a href="#">Забыли пароль?</a>
            </div>
        </div>
    </div>

    <!-- Страница дашборда -->
    <div id="dashboard" class="page" style="display: none;">
        <aside class="sidebar">
            <nav>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#" class="nav-link active" data-page="dashboard">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>
                            </span>
                            Панель
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="bots">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                            </span>
                            Боты
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="debug">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7 8h10m0 0v8a2 2 0 01-2 2H9a2 2 0 01-2-2V8m8 0V6a2 2 0 00-2-2H9a2 2 0 00-2 2v2m8 0H7m5 4v4" /></svg>
                            </span>
                            Дебаг
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="settings">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                            </span>
                            Настройки
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="admin">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" /></svg>
                            </span>
                            Администрирование
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="help">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            </span>
                            Помощь
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="databases">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" /></svg>
                            </span>
                            Базы данных
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <header class="header fixed-header">
                <!-- Mobile Menu Button -->
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                <div class="search-bar">
                    <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" /></svg>
                    <input type="text" placeholder="Быстрый поиск">
                </div>
                <div class="header-actions">
                    <!-- Notifications -->
                    <div class="notification-button" id="notificationButton">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                        </svg>
                        <span class="notification-badge" id="notificationBadge">0</span>
                    </div>
                    
                    <!-- User Menu -->
                    <div class="user-info" id="userMenuButton">
                        <div class="user-avatar">U</div>
                        <span>Admin</span>
                        <svg class="dropdown-arrow" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                        </svg>
                    </div>
                </div>
                
                <!-- Notification Dropdown -->
                <div class="notification-dropdown" id="notificationDropdown">
                    <div class="notification-header">
                        <h3>Уведомления</h3>
                        <button class="clear-all-btn" id="clearAllNotifications">Очистить все</button>
                    </div>
                    <div class="notification-list" id="notificationList">
                        <div class="no-notifications">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                            </svg>
                            <p>Нет новых уведомлений</p>
                        </div>
                    </div>
                </div>
                
                <!-- User Dropdown -->
                <div class="user-dropdown" id="userDropdown">
                    <div class="dropdown-item" id="themeToggle">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                        <span>Темная тема</span>
                        <div class="theme-toggle">
                            <div class="toggle-switch"></div>
                        </div>
                    </div>
                    <div class="dropdown-item" id="logoutButton">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                            <polyline points="16,17 21,12 16,7"/>
                            <line x1="21" y1="12" x2="9" y2="12"/>
                        </svg>
                        <span>Выйти</span>
                    </div>
                </div>
            </header>

            <div class="dashboard-content">
                <div class="dashboard-header">
                    <h1 class="dashboard-title">
                        <svg class="title-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                            <path d="M9 9h6v6H9z"/>
                            <path d="M9 3v6M15 3v6M9 15v6M15 15v6M3 9h6M3 15h6M15 9h6M15 15h6"/>
                        </svg>
                        Панель управления
                    </h1>
                    <div class="dashboard-actions">
                        <select id="dashboardPeriod" class="period-selector">
                            <option value="1h">Последний час</option>
                            <option value="24h" selected>24 часа</option>
                            <option value="7d">7 дней</option>
                            <option value="30d">30 дней</option>
                        </select>
                        <button class="btn btn-secondary" id="refreshDashboard">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 2v6h-6M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8M3 22v-6h6M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                            </svg>
                            Обновить
                        </button>
                    </div>
                </div>

                <!-- Основные метрики -->
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
                                <line x1="8" y1="21" x2="16" y2="21"/>
                                <line x1="12" y1="17" x2="12" y2="21"/>
                            </svg>
                        </div>
                        <div class="metric-content">
                            <div class="metric-value" id="totalBots">-</div>
                            <div class="metric-label">Всего ботов</div>
                            <div class="metric-change positive" id="activeBots">- активных</div>
                        </div>
                    </div>

                    <div class="metric-card">
                        <div class="metric-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                            </svg>
                        </div>
                        <div class="metric-content">
                            <div class="metric-value" id="totalMessages">-</div>
                            <div class="metric-label">Сообщений</div>
                            <div class="metric-change" id="messageChange">за период</div>
                        </div>
                    </div>

                    <div class="metric-card">
                        <div class="metric-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/>
                                <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                                <line x1="12" y1="19" x2="12" y2="23"/>
                                <line x1="8" y1="23" x2="16" y2="23"/>
                            </svg>
                        </div>
                        <div class="metric-content">
                            <div class="metric-value" id="totalAiRequests">-</div>
                            <div class="metric-label">AI запросов</div>
                            <div class="metric-change" id="aiRequestsChange">за период</div>
                        </div>
                    </div>

                    <div class="metric-card">
                        <div class="metric-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                            </svg>
                        </div>
                        <div class="metric-content">
                            <div class="metric-value" id="systemUptime">-</div>
                            <div class="metric-label">Время работы</div>
                            <div class="metric-change positive" id="systemStatus">Система работает</div>
                        </div>
                    </div>
                </div>

                <!-- Графики -->
                <div class="charts-grid">
                    <div class="chart-widget">
                        <div class="chart-header">
                            <h3 class="chart-title">
                                <svg class="chart-title-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M3 3v18h18"/>
                                    <path d="M7 12l4-4 4 4 4-4"/>
                                </svg>
                                Активность сообщений
                            </h3>
                            <div class="chart-legend">
                                <span class="legend-item">
                                    <span class="legend-color" style="background: rgb(59, 130, 246);"></span>
                                    Сообщения
                                </span>
                                <span class="legend-item">
                                    <span class="legend-color" style="background: rgb(16, 185, 129);"></span>
                                    Уникальные чаты
                                </span>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="messagesChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-widget">
                        <div class="chart-header">
                            <h3 class="chart-title">
                                <svg class="chart-title-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="3"/>
                                    <path d="M12 1v6m0 6v6"/>
                                    <path d="M1 12h6m6 0h6"/>
                                    <path d="M12 6l2.5-2.5M12 18l2.5 2.5"/>
                                    <path d="M6 12l-2.5-2.5M18 12l2.5-2.5"/>
                                    <path d="M12 6l-2.5-2.5M12 18l-2.5 2.5"/>
                                    <path d="M6 12l-2.5 2.5M18 12l2.5 2.5"/>
                                </svg>
                                AI запросы
                            </h3>
                            <div class="chart-info">
                                <span class="info-badge">Реальное время</span>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="aiRequestsChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-widget">
                        <div class="chart-header">
                            <h3 class="chart-title">
                                <svg class="chart-title-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 20V10"/>
                                    <path d="M18 20V4"/>
                                    <path d="M6 20v-4"/>
                                </svg>
                                Системные метрики
                            </h3>
                            <div class="system-indicators">
                                <div class="indicator">
                                    <span class="indicator-label">Память</span>
                                    <span class="indicator-value" id="memoryUsage">-</span>
                                </div>
                                <div class="indicator">
                                    <span class="indicator-label">Успешность</span>
                                    <span class="indicator-value" id="successRate">-</span>
                                </div>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="systemChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-widget">
                        <div class="chart-header">
                            <h3 class="chart-title">
                                <svg class="chart-title-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                                    <circle cx="9" cy="7" r="4"/>
                                    <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                                    <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                                </svg>
                                Производительность
                            </h3>
                            <div class="performance-stats">
                                <div class="stat-item">
                                    <span class="stat-label">Запросов</span>
                                    <span class="stat-value" id="totalRequests">-</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Ошибок</span>
                                    <span class="stat-value error" id="failedRequests">-</span>
                                </div>
                            </div>
                        </div>
                        <div class="chart-container">
                            <div class="performance-bars">
                                <div class="performance-bar">
                                    <div class="bar-label">Успешные запросы</div>
                                    <div class="bar-track">
                                        <div class="bar-fill success" id="successBar" style="width: 0%"></div>
                                    </div>
                                    <div class="bar-value" id="successValue">0%</div>
                                </div>
                                <div class="performance-bar">
                                    <div class="bar-label">Использование памяти</div>
                                    <div class="bar-track">
                                        <div class="bar-fill warning" id="memoryBar" style="width: 0%"></div>
                                    </div>
                                    <div class="bar-value" id="memoryValue">0%</div>
                                </div>
                                <div class="performance-bar">
                                    <div class="bar-label">Активные боты</div>
                                    <div class="bar-track">
                                        <div class="bar-fill primary" id="botsBar" style="width: 0%"></div>
                                    </div>
                                    <div class="bar-value" id="botsValue">0%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Детальная информация -->
                <div class="dashboard-details">
                    <div class="detail-section">
                        <h3 class="section-title">
                            <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
                            </svg>
                            Статус системы
                        </h3>
                        <div class="status-grid">
                            <div class="status-item">
                                <div class="status-indicator active"></div>
                                <span>Сервер работает</span>
                            </div>
                            <div class="status-item">
                                <div class="status-indicator active"></div>
                                <span>База данных доступна</span>
                            </div>
                            <div class="status-item">
                                <div class="status-indicator" id="aiStatusIndicator"></div>
                                <span>AI сервисы</span>
                            </div>
                            <div class="status-item">
                                <div class="status-indicator active"></div>
                                <span>Telegram API</span>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3 class="section-title">
                            <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
                                <line x1="8" y1="21" x2="16" y2="21"/>
                                <line x1="12" y1="17" x2="12" y2="21"/>
                            </svg>
                            Активные боты
                        </h3>
                        <div class="active-bots-list" id="activeBotsList">
                            <div class="loading-placeholder">Загрузка...</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Страница ботов -->
    <div id="bots" class="page" style="display: none;">
        <aside class="sidebar">
            <nav>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="dashboard">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>
                            </span>
                            Панель
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link active" data-page="bots">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                            </span>
                            Боты
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="debug">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7 8h10m0 0v8a2 2 0 01-2 2H9a2 2 0 01-2-2V8m8 0V6a2 2 0 00-2-2H9a2 2 0 00-2 2v2m8 0H7m5 4v4" /></svg>
                            </span>
                            Дебаг
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="settings">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                            </span>
                            Настройки
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="admin">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" /></svg>
                            </span>
                            Администрирование
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="help">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            </span>
                            Помощь
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="databases">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" /></svg>
                            </span>
                            Базы данных
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <header class="header fixed-header">
                <!-- Mobile Menu Button -->
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                <div class="search-bar">
                    <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" /></svg>
                    <input type="text" placeholder="Поиск по имени или ID">
                </div>
                <div class="header-actions">
                    <!-- Notifications -->
                    <div class="notification-button" id="notificationButton">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                        </svg>
                        <span class="notification-badge" id="notificationBadge">0</span>
                    </div>
                    
                    <!-- User Menu -->
                    <div class="user-info" id="userMenuButton">
                        <div class="user-avatar">U</div>
                        <span>Admin</span>
                        <svg class="dropdown-arrow" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                        </svg>
                    </div>
                </div>
                
                <!-- Notification Dropdown -->
                <div class="notification-dropdown" id="notificationDropdown">
                    <div class="notification-header">
                        <h3>Уведомления</h3>
                        <button class="clear-all-btn" id="clearAllNotifications">Очистить все</button>
                    </div>
                    <div class="notification-list" id="notificationList">
                        <div class="no-notifications">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                            </svg>
                            <p>Нет новых уведомлений</p>
                        </div>
                    </div>
                </div>
                
                <!-- User Dropdown -->
                <div class="user-dropdown" id="userDropdown">
                    <div class="dropdown-item" id="themeToggle">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                        <span>Темная тема</span>
                        <div class="theme-toggle">
                            <div class="toggle-switch"></div>
                        </div>
                    </div>
                    <div class="dropdown-item" id="logoutButton">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                            <polyline points="16,17 21,12 16,7"/>
                            <line x1="21" y1="12" x2="9" y2="12"/>
                        </svg>
                        <span>Выйти</span>
                    </div>
                </div>
            </header>

            <div class="card">
                <div class="card-header">Управление ботами</div>
                
                <div class="tabs">
                    <button class="tab active" data-tab="all-bots">Все боты</button>
                    <button class="tab" data-tab="create-bot">Создать бота</button>
                </div>

                <!-- Все боты -->
                <div id="all-bots-content" class="tab-content">
                    <div style="display: flex; gap: 24px;">
                        <div class="filters" style="width: 250px;">
                            <div class="filter-title">Фильтры</div>
                            
                            <div class="filter-group">
                                <div class="filter-label">Статус подключения</div>
                                <div class="filter-options">
                                    <div class="filter-option">
                                        <input type="checkbox" id="online" value="online">
                                        <label for="online">Онлайн</label>
                                    </div>
                                    <div class="filter-option">
                                        <input type="checkbox" id="offline" value="offline">
                                        <label for="offline">Оффлайн</label>
                                    </div>
                                </div>
                            </div>

                            <div class="filter-group">
                                <div class="filter-label">Активность</div>
                                <div class="filter-options">
                                    <div class="filter-option">
                                        <input type="checkbox" id="active" value="active">
                                        <label for="active">Активные</label>
                                    </div>
                                    <div class="filter-option">
                                        <input type="checkbox" id="inactive" value="inactive">
                                        <label for="inactive">Неактивные</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="flex: 1;">
                            <div class="responsive-table">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Бот</th>
                                            <th>Статус</th>
                                            <th class="hidden-mobile">API Ключ</th>
                                            <th class="hidden-mobile">Модель</th>
                                            <th class="hidden-tablet">База данных</th>
                                            <th class="hidden-tablet">Дата создания</th>
                                            <th>Действия</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Данные ботов загружаются динамически через JavaScript -->
                                    </tbody>
                                </table>
                            </div>

                            <div class="pagination">
                                <a href="#" class="pagination-item">←</a>
                                <a href="#" class="pagination-item active">1</a>
                                <a href="#" class="pagination-item">2</a>
                                <a href="#" class="pagination-item">→</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Создание бота -->
                <div id="create-bot-content" class="tab-content" style="display: none;">
                    <form class="bot-form" id="createBotForm">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                            <div class="form-group">
                                <label for="botName" class="form-label">Имя бота</label>
                                <input type="text" id="botName" class="form-input" placeholder="Введите имя бота" required>
                            </div>

                            <div class="form-group">
                                <label for="botTag" class="form-label">Тег для поиска</label>
                                <input type="text" id="botTag" class="form-input" placeholder="например: sales, support">
                            </div>

                            <div class="form-group" style="grid-column: 1 / -1;">
                                <label for="botDescription" class="form-label">Описание</label>
                                <textarea id="botDescription" class="form-textarea" placeholder="Описание функций бота"></textarea>
                            </div>

                            <div class="form-group">
                                <label for="telegramToken" class="form-label">Telegram Token</label>
                                <input type="text" id="telegramToken" class="form-input" placeholder="Вставьте токен от BotFather" required>
                            </div>

                            <div class="form-group">
                                <label for="apiUrl" class="form-label">API URL</label>
                                <input type="url" id="apiUrl" class="form-input" placeholder="https://api.openai.com/v1, https://api.deepseek.com, https://api.langdock.com/...">
                            </div>

                            <div class="form-group">
                                <label for="apiKey" class="form-label">API ключ</label>
                                <input type="text" id="apiKey" class="form-input" placeholder="sk-..." required>
                            </div>

                            <div class="form-group">
                                <label for="aiModel" class="form-label">Модель AI</label>
                                <input type="text" id="aiModel" class="form-input" placeholder="gpt-4, claude-3-sonnet, deepseek-chat, deepseek-reasoner..." required>
                            </div>

                            <div class="form-group">
                                <label for="database" class="form-label">База данных</label>
                                <select id="database" class="form-select">
                                    <option value="">Выберите базу данных</option>
                                </select>
                            </div>

                            <div class="form-group" style="grid-column: 1 / -1;">
                                <label for="systemPrompt" class="form-label">Системный промпт</label>
                                <textarea id="systemPrompt" class="form-textarea" placeholder="Инструкции для ИИ бота..." style="min-height: 120px;"></textarea>
                            </div>

                            <div class="form-group" style="grid-column: 1 / -1;">
                                <div style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: var(--radius-sm); padding: 16px; font-size: 14px; color: var(--text-secondary); margin-bottom: 16px;">
                                    <strong>Поддерживаемые AI сервисы:</strong><br>
                                    • <strong>OpenAI:</strong> https://api.openai.com/v1 (gpt-4, gpt-3.5-turbo)<br>
                                    • <strong>DeepSeek:</strong> https://api.deepseek.com (deepseek-chat, deepseek-reasoner)<br>
                                    • <strong>LangDock:</strong> https://api.langdock.com/anthropic/eu/v1/messages (claude-3-7-sonnet-20250219)<br>
                                    • <strong>Anthropic:</strong> https://api.anthropic.com/v1/messages (claude-3-sonnet)<br>
                                    • <strong>Google:</strong> https://generativelanguage.googleapis.com/v1beta/models/MODEL:generateContent (gemini-pro)
                                </div>
                                
                                <div class="checkbox-group">
                                    <div class="checkbox" id="isActiveCreate"></div>
                                    <label for="isActiveCreate" class="checkbox-label">Бот активен</label>
                                </div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 16px; margin-top: 24px;">
                            <button type="submit" class="btn btn-primary">Создать бота</button>
                            <button type="button" class="btn btn-secondary" onclick="clearForm()">Очистить</button>
                        </div>
                    </form>
                </div>
            </div>
        </main>
    </div>

    <!-- Страница настроек бота -->
    <div id="bot-settings" class="page" style="display: none;">
        <aside class="sidebar">
            <nav>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="dashboard">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>
                            </span>
                            Панель
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="bots">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                            </span>
                            Боты
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="debug">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7 8h10m0 0v8a2 2 0 01-2 2H9a2 2 0 01-2-2V8m8 0V6a2 2 0 00-2-2H9a2 2 0 00-2 2v2m8 0H7m5 4v4" /></svg>
                            </span>
                            Дебаг
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="settings">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                            </span>
                            Настройки
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="admin">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" /></svg>
                            </span>
                            Администрирование
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="help">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            </span>
                            Помощь
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="databases">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" /></svg>
                            </span>
                            Базы данных
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <header class="header fixed-header">
                <div class="search-bar">
                    <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" /></svg>
                    <input type="text" placeholder="Быстрый поиск">
                </div>
                <div class="header-actions">
                    <!-- Notifications -->
                    <div class="notification-button" id="notificationButton">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                        </svg>
                        <span class="notification-badge" id="notificationBadge">0</span>
                    </div>
                    
                    <!-- User Menu -->
                    <div class="user-info" id="userMenuButton">
                        <div class="user-avatar">U</div>
                        <span>Admin</span>
                        <svg class="dropdown-arrow" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                        </svg>
                    </div>
                </div>
                
                <!-- Notification Dropdown -->
                <div class="notification-dropdown" id="notificationDropdown">
                    <div class="notification-header">
                        <h3>Уведомления</h3>
                        <button class="clear-all-btn" id="clearAllNotifications">Очистить все</button>
                    </div>
                    <div class="notification-list" id="notificationList">
                        <div class="no-notifications">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                            </svg>
                            <p>Нет новых уведомлений</p>
                        </div>
                    </div>
                </div>
                
                <!-- User Dropdown -->
                <div class="user-dropdown" id="userDropdown">
                    <div class="dropdown-item" id="themeToggle">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                        <span>Темная тема</span>
                        <div class="theme-toggle">
                            <div class="toggle-switch"></div>
                        </div>
                    </div>
                    <div class="dropdown-item" id="logoutButton">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                            <polyline points="16,17 21,12 16,7"/>
                            <line x1="21" y1="12" x2="9" y2="12"/>
                        </svg>
                        <span>Выйти</span>
                    </div>
                </div>
            </header>

            <div class="card">
                <div class="card-header">Настройки бота</div>
                
                <form class="bot-form" id="editBotForm">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                        <div class="form-group">
                            <label for="editBotName" class="form-label">Имя бота</label>
                            <input type="text" id="editBotName" class="form-input" placeholder="Введите имя бота" required>
                        </div>

                        <div class="form-group">
                            <label for="editBotTag" class="form-label">Тег для поиска</label>
                            <input type="text" id="editBotTag" class="form-input" placeholder="Введите тег">
                        </div>

                        <div class="form-group" style="grid-column: 1 / -1;">
                            <label for="editBotDescription" class="form-label">Описание</label>
                            <textarea id="editBotDescription" class="form-textarea" placeholder="Описание функций бота"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="editTelegramToken" class="form-label">Telegram Token</label>
                            <input type="text" id="editTelegramToken" class="form-input" placeholder="Введите токен бота" required>
                        </div>

                        <div class="form-group">
                            <label for="editApiUrl" class="form-label">API URL</label>
                            <input type="url" id="editApiUrl" class="form-input" placeholder="https://api.example.com">
                        </div>

                        <div class="form-group">
                            <label for="editApiKey" class="form-label">API ключ</label>
                            <input type="text" id="editApiKey" class="form-input" placeholder="Введите API ключ" required>
                        </div>

                        <div class="form-group">
                            <label for="editAiModel" class="form-label">Модель AI</label>
                            <input type="text" id="editAiModel" class="form-input" placeholder="Введите модель AI" required>
                        </div>

                        <div class="form-group">
                            <label for="editDatabase" class="form-label">База данных</label>
                            <select id="editDatabase" class="form-select">
                                <option value="">Выберите базу данных</option>
                            </select>
                        </div>

                        <div class="form-group" style="grid-column: 1 / -1;">
                            <label for="editSystemPrompt" class="form-label">Системный промпт</label>
                            <textarea id="editSystemPrompt" class="form-textarea" style="min-height: 120px;" placeholder="Введите системный промпт для бота"></textarea>
                        </div>

                        <div class="form-group" style="display: flex; align-items: center; gap: 20px; border-top: 1px solid var(--border-light); padding-top: 24px;">
                            <div class="checkbox-group" style="margin-bottom: 0;">
                                <div class="checkbox" id="memoryEnabledEdit" onclick="toggleMemorySettings(this)"></div>
                                <label for="memoryEnabledEdit" class="checkbox-label">Память чата</label>
                            </div>
                            
                            <div id="memoryCountGroup" style="display: flex; align-items: center; gap: 8px;">
                                <label for="editMemoryCount" style="color: var(--text-secondary); font-size: 14px;">Сообщений:</label>
                                <input type="number" id="editMemoryCount" class="form-input" value="5" min="1" max="50" style="width: 80px; font-size: 14px;">
                            </div>
                        </div>

                        <div class="form-group" style="grid-column: 1 / -1;">
                            <div class="checkbox-group">
                                <div class="checkbox checked" id="isActiveEdit"></div>
                                <label for="isActiveEdit" class="checkbox-label">Бот активен</label>
                            </div>
                        </div>
                    </div>

                    <div style="display: flex; gap: 16px; margin-top: 24px;">
                        <button type="submit" class="btn btn-primary">Сохранить изменения</button>
                        <button type="button" class="btn btn-secondary" onclick="showBotCommands()">
                            <svg viewBox="0 0 24 24" style="width: 16px; height: 16px;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                            </svg>
                            Команды
                        </button>

                        <button type="button" class="btn btn-secondary" onclick="cancelEdit()">Отменить</button>
                        <button type="button" class="btn btn-danger" onclick="deleteBot()">Удалить бота</button>
                    </div>
                </form>
            </div>
        </main>
    </div>

    <!-- Страница дебага -->
    <div id="debug" class="page" style="display: none;">
        <aside class="sidebar">
            <nav>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="dashboard">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>
                            </span>
                            Панель
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="bots">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                            </span>
                            Боты
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link active" data-page="debug">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7 8h10m0 0v8a2 2 0 01-2 2H9a2 2 0 01-2-2V8m8 0V6a2 2 0 00-2-2H9a2 2 0 00-2 2v2m8 0H7m5 4v4" /></svg>
                            </span>
                            Дебаг
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="settings">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                            </span>
                            Настройки
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="admin">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" /></svg>
                            </span>
                            Администрирование
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="help">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            </span>
                            Помощь
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="databases">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" /></svg>
                            </span>
                            Базы данных
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <header class="header fixed-header">
                <div class="search-bar">
                    <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" /></svg>
                    <input type="text" placeholder="Поиск в логах">
                </div>
                <div class="header-actions">
                    <!-- Notifications -->
                    <div class="notification-button" id="notificationButton">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                        </svg>
                        <span class="notification-badge" id="notificationBadge">0</span>
                    </div>
                    
                    <!-- User Menu -->
                    <div class="user-info" id="userMenuButton">
                        <div class="user-avatar">U</div>
                        <span>Admin</span>
                        <svg class="dropdown-arrow" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                        </svg>
                    </div>
                </div>
                
                <!-- Notification Dropdown -->
                <div class="notification-dropdown" id="notificationDropdown">
                    <div class="notification-header">
                        <h3>Уведомления</h3>
                        <button class="clear-all-btn" id="clearAllNotifications">Очистить все</button>
                    </div>
                    <div class="notification-list" id="notificationList">
                        <div class="no-notifications">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                            </svg>
                            <p>Нет новых уведомлений</p>
                        </div>
                    </div>
                </div>
                
                <!-- User Dropdown -->
                <div class="user-dropdown" id="userDropdown">
                    <div class="dropdown-item" id="themeToggle">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                        <span>Темная тема</span>
                        <div class="theme-toggle">
                            <div class="toggle-switch"></div>
                        </div>
                    </div>
                    <div class="dropdown-item" id="logoutButton">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                            <polyline points="16,17 21,12 16,7"/>
                            <line x1="21" y1="12" x2="9" y2="12"/>
                        </svg>
                        <span>Выйти</span>
                    </div>
                </div>
            </header>

            <div class="card">
                <div class="card-header">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Мониторинг системы</span>
                        <div style="display: flex; gap: 8px;">
                            <select id="logLevel" class="form-select" style="width: auto; font-size: 12px;">
                                <option value="">Все уровни</option>
                                <option value="INFO">INFO</option>
                                <option value="SUCCESS">SUCCESS</option>
                                <option value="WARNING">WARNING</option>
                                <option value="ERROR">ERROR</option>
                            </select>
                            <select id="logCategory" class="form-select" style="width: auto; font-size: 12px;">
                                <option value="">Все категории</option>
                                <option value="SERVER">SERVER</option>
                                <option value="BOT">BOT</option>
                                <option value="API">API</option>
                                <option value="AUTH">AUTH</option>
                                <option value="DATABASE">DATABASE</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Server Stats -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">
                    <div class="stat-card">
                        <div class="stat-value" id="serverUptime">0h 0m</div>
                        <div class="stat-label">Время работы</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalRequests">0</div>
                        <div class="stat-label">Всего запросов</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="apiCalls">0</div>
                        <div class="stat-label">AI API вызовы</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="activeBots">0</div>
                        <div class="stat-label">Активные боты</div>
                    </div>
                </div>
                
                <!-- Live Logs -->
                <div class="debug-console" id="debugConsole">
                    <div class="log-entry log-info">
                        <span class="log-time">Загрузка...</span>
                        <span class="log-level">INFO</span>
                        <span class="log-message">Подключение к серверу логов...</span>
                    </div>
                </div>
                
                <div style="margin-top: 16px; display: flex; gap: 12px; justify-content: space-between;">
                    <div style="display: flex; gap: 12px;">
                        <button class="btn btn-secondary btn-small" onclick="clearLogs()">Очистить логи</button>
                        <button class="btn btn-secondary btn-small" onclick="exportLogs()">Экспорт логов</button>
                    </div>
                    <div style="display: flex; gap: 12px; align-items: center;">
                        <label style="font-size: 12px; color: var(--text-secondary);">
                            <input type="checkbox" id="autoRefresh" checked style="margin-right: 4px;">
                            Авто-обновление
                        </label>
                        <button class="btn btn-primary btn-small" onclick="refreshLogs()">Обновить</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Страница настроек системы -->
    <div id="settings" class="page" style="display: none;">
        <aside class="sidebar">
            <nav>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="dashboard">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>
                            </span>
                            Панель
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="bots">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                            </span>
                            Боты
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="debug">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7 8h10m0 0v8a2 2 0 01-2 2H9a2 2 0 01-2-2V8m8 0V6a2 2 0 00-2-2H9a2 2 0 00-2 2v2m8 0H7m5 4v4" /></svg>
                            </span>
                            Дебаг
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link active" data-page="settings">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                            </span>
                            Настройки
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="admin">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" /></svg>
                            </span>
                            Администрирование
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="help">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            </span>
                            Помощь
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="databases">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" /></svg>
                            </span>
                            Базы данных
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <header class="header fixed-header">
                <div class="search-bar">
                    <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" /></svg>
                    <input type="text" placeholder="Быстрый поиск">
                </div>
                <div class="header-actions">
                    <!-- Notifications -->
                    <div class="notification-button" id="notificationButton">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                        </svg>
                        <span class="notification-badge" id="notificationBadge">0</span>
                    </div>
                    
                    <!-- User Menu -->
                    <div class="user-info" id="userMenuButton">
                        <div class="user-avatar">U</div>
                        <span>Admin</span>
                        <svg class="dropdown-arrow" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                        </svg>
                    </div>
                </div>
                
                <!-- Notification Dropdown -->
                <div class="notification-dropdown" id="notificationDropdown">
                    <div class="notification-header">
                        <h3>Уведомления</h3>
                        <button class="clear-all-btn" id="clearAllNotifications">Очистить все</button>
                    </div>
                    <div class="notification-list" id="notificationList">
                        <div class="no-notifications">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                            </svg>
                            <p>Нет новых уведомлений</p>
                        </div>
                    </div>
                </div>
                
                <!-- User Dropdown -->
                <div class="user-dropdown" id="userDropdown">
                    <div class="dropdown-item" id="themeToggle">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                        <span>Темная тема</span>
                        <div class="theme-toggle">
                            <div class="toggle-switch"></div>
                        </div>
                    </div>
                    <div class="dropdown-item" id="logoutButton">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                            <polyline points="16,17 21,12 16,7"/>
                            <line x1="21" y1="12" x2="9" y2="12"/>
                        </svg>
                        <span>Выйти</span>
                    </div>
                </div>
            </header>

            <div class="card">
                <div class="card-header">
                    <h2>Настройки AI Поддержки</h2>
                    <p>Конфигурация автономной службы поддержки на базе искусственного интеллекта</p>
                </div>
                
                <form id="settingsForm" class="settings-form">
                                    <div class="form-group">
                    <div class="checkbox-with-status">
                        <div class="checkbox" id="supportEnabled" onclick="navigation.toggleCheckbox(this)">
                            <span class="checkbox-label">Включить</span>
                        </div>
                        <span class="activation-status inactive" id="activationStatus">AI поддержка отключена</span>
                    </div>
                    <div class="form-help">Активирует автономную службу поддержки с AI ассистентом</div>
                </div>

                    <div class="form-group">
                        <label class="form-label" for="supportApiUrl">API URL</label>
                        <input type="text" id="supportApiUrl" class="form-input" placeholder="https://api.openai.com/v1">
                        <div class="form-help">URL для AI API (OpenAI, DeepSeek, Anthropic, Google и др.)</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="supportApiKey">API Ключ</label>
                        <input type="password" id="supportApiKey" class="form-input" placeholder="Введите API ключ">
                        <div class="form-help">API ключ для доступа к AI сервису</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="supportAiModel">Модель AI</label>
                        <input type="text" id="supportAiModel" class="form-input" placeholder="gpt-4">
                        <div class="form-help">Название модели AI (gpt-4, gpt-3.5-turbo, claude-3-sonnet и др.)</div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <svg viewBox="0 0 24 24" style="width: 16px; height: 16px;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                            </svg>
                            Сохранить настройки
                        </button>
                    </div>
                </form>
            </div>
        </main>
    </div>

    <!-- Страница администрирования -->
    <div id="admin" class="page" style="display: none;">
        <aside class="sidebar">
            <nav>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="dashboard">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>
                            </span>
                            Панель
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="bots">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                            </span>
                            Боты
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="debug">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7 8h10m0 0v8a2 2 0 01-2 2H9a2 2 0 01-2-2V8m8 0V6a2 2 0 00-2-2H9a2 2 0 00-2 2v2m8 0H7m5 4v4" /></svg>
                            </span>
                            Дебаг
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="settings">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                            </span>
                            Настройки
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link active" data-page="admin">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" /></svg>
                            </span>
                            Администрирование
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="help">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            </span>
                            Помощь
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="databases">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" /></svg>
                            </span>
                            Базы данных
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <header class="header fixed-header">
                <div class="search-bar">
                    <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" /></svg>
                    <input type="text" placeholder="Быстрый поиск">
                </div>
                <div class="header-actions">
                    <!-- Notifications -->
                    <div class="notification-button" id="notificationButton">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                        </svg>
                        <span class="notification-badge" id="notificationBadge">0</span>
                    </div>
                    
                    <!-- User Menu -->
                    <div class="user-info" id="userMenuButton">
                        <div class="user-avatar">U</div>
                        <span>Admin</span>
                        <svg class="dropdown-arrow" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                        </svg>
                    </div>
                </div>
                
                <!-- Notification Dropdown -->
                <div class="notification-dropdown" id="notificationDropdown">
                    <div class="notification-header">
                        <h3>Уведомления</h3>
                        <button class="clear-all-btn" id="clearAllNotifications">Очистить все</button>
                    </div>
                    <div class="notification-list" id="notificationList">
                        <div class="no-notifications">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                            </svg>
                            <p>Нет новых уведомлений</p>
                        </div>
                    </div>
                </div>
                
                <!-- User Dropdown -->
                <div class="user-dropdown" id="userDropdown">
                    <div class="dropdown-item" id="themeToggle">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                        <span>Темная тема</span>
                        <div class="theme-toggle">
                            <div class="toggle-switch"></div>
                        </div>
                    </div>
                    <div class="dropdown-item" id="logoutButton">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                            <polyline points="16,17 21,12 16,7"/>
                            <line x1="21" y1="12" x2="9" y2="12"/>
                        </svg>
                        <span>Выйти</span>
                    </div>
                </div>
            </header>

            <div class="card">
                <div class="card-header">Администрирование</div>
                <p>Управление пользователями и правами доступа</p>
            </div>
        </main>
    </div>

    <!-- Страница помощи -->
    <div id="help" class="page" style="display: none;">
        <aside class="sidebar">
            <nav>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="dashboard">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>
                            </span>
                            Панель
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="bots">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                            </span>
                            Боты
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="debug">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7 8h10m0 0v8a2 2 0 01-2 2H9a2 2 0 01-2-2V8m8 0V6a2 2 0 00-2-2H9a2 2 0 00-2 2v2m8 0H7m5 4v4" /></svg>
                            </span>
                            Дебаг
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="settings">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                            </span>
                            Настройки
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="admin">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" /></svg>
                            </span>
                            Администрирование
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link active" data-page="help">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            </span>
                            Помощь
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="databases">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" /></svg>
                            </span>
                            Базы данных
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <header class="header fixed-header">
                <div class="search-bar">
                    <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" /></svg>
                    <input type="text" placeholder="Быстрый поиск">
                </div>
                <div class="header-actions">
                    <!-- Notifications -->
                    <div class="notification-button" id="notificationButton">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                        </svg>
                        <span class="notification-badge" id="notificationBadge">0</span>
                    </div>
                    
                    <!-- User Menu -->
                    <div class="user-info" id="userMenuButton">
                        <div class="user-avatar">U</div>
                        <span>Admin</span>
                        <svg class="dropdown-arrow" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                        </svg>
                    </div>
                </div>
                
                <!-- Notification Dropdown -->
                <div class="notification-dropdown" id="notificationDropdown">
                    <div class="notification-header">
                        <h3>Уведомления</h3>
                        <button class="clear-all-btn" id="clearAllNotifications">Очистить все</button>
                    </div>
                    <div class="notification-list" id="notificationList">
                        <div class="no-notifications">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                            </svg>
                            <p>Нет новых уведомлений</p>
                        </div>
                    </div>
                </div>
                
                <!-- User Dropdown -->
                <div class="user-dropdown" id="userDropdown">
                    <div class="dropdown-item" id="themeToggle">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                        <span>Темная тема</span>
                        <div class="theme-toggle">
                            <div class="toggle-switch"></div>
                        </div>
                    </div>
                    <div class="dropdown-item" id="logoutButton">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                            <polyline points="16,17 21,12 16,7"/>
                            <line x1="21" y1="12" x2="9" y2="12"/>
                        </svg>
                        <span>Выйти</span>
                    </div>
                </div>
            </header>

            <div class="card">
                <div class="card-header">
                    <h2>Поддержка</h2>
                    <p>Задайте любой вопрос о работе с админ панелью</p>
                </div>
                
                <div class="support-chat" id="supportChat">
                    <div class="chat-header">
                        <div class="chat-header-avatar">
                            <svg viewBox="0 0 24 24" style="width: 20px; height: 20px; fill: currentColor;">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                        </div>
                        <div class="chat-header-info">
                            <h4>Ассистент</h4>
                            <p>Служба поддержки</p>
                        </div>
                        <div class="chat-status">
                            <div class="status-dot"></div>
                            В сети
                        </div>
                    </div>
                    
                    <div class="chat-messages" id="chatMessages">
                        <div class="chat-message ai-message">
                            <div class="message-avatar">
                                <svg viewBox="0 0 24 24" style="width: 16px; height: 16px; fill: currentColor;">
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                </svg>
                            </div>
                            <div class="message-content">
                                <div class="message-text">Привет! Чем могу помочь?</div>
                                <div class="message-time">Сейчас</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chat-input-container">
                        <form id="chatForm" class="chat-form">
                            <div class="chat-input-wrapper">
                                <div class="chat-input-icon">
                                    <svg viewBox="0 0 24 24" style="width: 16px; height: 16px; stroke: currentColor; fill: none;">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z" />
                                    </svg>
                                </div>
                                <textarea id="chatInput" class="chat-input" placeholder="Задайте вопрос о работе с системой..." rows="1"></textarea>
                            </div>
                            <button type="submit" class="chat-send-btn">
                                <svg viewBox="0 0 24 24" style="width: 18px; height: 18px; stroke: currentColor; fill: none;">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" />
                                </svg>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Страница баз данных -->
    <div id="databases" class="page" style="display: none;">
        <aside class="sidebar">
            <nav>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="dashboard">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>
                            </span>
                            Панель
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="bots">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                            </span>
                            Боты
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="debug">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M7 8h10m0 0v8a2 2 0 01-2 2H9a2 2 0 01-2-2V8m8 0V6a2 2 0 00-2-2H9a2 2 0 00-2 2v2m8 0H7m5 4v4" /></svg>
                            </span>
                            Дебаг
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="settings">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                            </span>
                            Настройки
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="admin">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" /></svg>
                            </span>
                            Администрирование
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="help">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            </span>
                            Помощь
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link active" data-page="databases">
                            <span class="nav-icon">
                                <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" /></svg>
                            </span>
                            Базы данных
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <header class="header fixed-header">
                <div class="search-bar">
                    <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" /></svg>
                    <input type="text" placeholder="Быстрый поиск">
                </div>
                <div class="header-actions">
                    <!-- Notifications -->
                    <div class="notification-button" id="notificationButton">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                        </svg>
                        <span class="notification-badge" id="notificationBadge">0</span>
                    </div>
                    
                    <!-- User Menu -->
                    <div class="user-info" id="userMenuButton">
                        <div class="user-avatar">U</div>
                        <span>Admin</span>
                        <svg class="dropdown-arrow" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                        </svg>
                    </div>
                </div>
                
                <!-- Notification Dropdown -->
                <div class="notification-dropdown" id="notificationDropdown">
                    <div class="notification-header">
                        <h3>Уведомления</h3>
                        <button class="clear-all-btn" id="clearAllNotifications">Очистить все</button>
                    </div>
                    <div class="notification-list" id="notificationList">
                        <div class="no-notifications">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                            </svg>
                            <p>Нет новых уведомлений</p>
                        </div>
                    </div>
                </div>
                
                <!-- User Dropdown -->
                <div class="user-dropdown" id="userDropdown">
                    <div class="dropdown-item" id="themeToggle">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                        <span>Темная тема</span>
                        <div class="theme-toggle">
                            <div class="toggle-switch"></div>
                        </div>
                    </div>
                    <div class="dropdown-item" id="logoutButton">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                            <polyline points="16,17 21,12 16,7"/>
                            <line x1="21" y1="12" x2="9" y2="12"/>
                        </svg>
                        <span>Выйти</span>
                    </div>
                </div>
            </header>

            <div class="card">
                <div class="card-header">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Управление базами данных</span>
                        <button class="btn btn-primary" onclick="showCreateDatabaseModal()">
                            <svg viewBox="0 0 24 24" style="width: 16px; height: 16px;"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>
                            Создать базу данных
                        </button>
                    </div>
                </div>
                
                <p style="margin: 0 0 24px 0; color: var(--text-secondary);">
                    Создавайте и управляйте базами знаний для ваших ботов. 
                    <strong>Доступные типы:</strong> Текстовая, JSON. 
                    <span style="color: var(--warning-yellow);">Остальные типы в разработке.</span>
                </p>

                <div class="responsive-table">
                    <table class="table" id="databasesTable">
                        <thead>
                            <tr>
                                <th>Название</th>
                                <th class="hidden-mobile">Тип</th>
                                <th class="hidden-mobile">Размер</th>
                                <th class="hidden-tablet">Обновлено</th>
                                <th>Статус</th>
                                <th>Действия</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Данные загружаются через JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- Модальное окно создания/редактирования базы данных -->
    <div id="databaseModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="databaseModalTitle">Создать базу данных</h3>
                <button class="modal-close" onclick="closeDatabaseModal()">&times;</button>
            </div>
            
            <form id="databaseForm">
                <div class="form-group">
                    <label class="form-label">Название базы данных *</label>
                    <input type="text" id="dbName" class="form-input" placeholder="Введите название базы данных" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Тип базы данных *</label>
                    <select id="dbType" class="form-select" required onchange="handleDatabaseTypeChange()">
                        <option value="">Выберите тип</option>
                        <option value="text">Текстовая база знаний</option>
                        <option value="json">JSON данные</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Описание</label>
                    <input type="text" id="dbDescription" class="form-input" placeholder="Краткое описание назначения базы данных">
                </div>

                <div class="form-group" id="contentGroup" style="display: none;">
                    <label class="form-label" id="contentLabel">Содержимое</label>
                    <textarea id="dbContent" class="form-textarea" rows="12" placeholder="Введите содержимое базы данных"></textarea>
                    <div id="contentHelp" class="form-help"></div>
                </div>

                <div class="form-group" style="display: flex; gap: 12px; justify-content: flex-end; margin-top: 24px;">
                    <button type="button" class="btn btn-secondary" onclick="closeDatabaseModal()">Отмена</button>
                    <button type="submit" class="btn btn-primary" id="databaseSubmitBtn">Создать базу данных</button>
                    <button type="button" class="btn btn-danger" id="deleteDatabaseBtn" style="display: none;" onclick="deleteDatabase()">Удалить</button>
                </div>
            </form>
        </div>
    </div>
        </main>
    </div>

    </div> <!-- End App Container -->

    <!-- Модальное окно команд бота -->
    <div id="botCommandsModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h3>Команды бота</h3>
                <button class="modal-close" onclick="closeBotCommandsModal()">&times;</button>
            </div>
            
            <div class="modal-body">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <p style="color: var(--text-secondary); margin: 0;">
                        Создавайте кастомные команды для Telegram бота. AI модель будет автоматически распознавать команды и выполнять соответствующие действия.
                    </p>
                    <div style="display: flex; gap: 12px;">
                        <button class="btn btn-secondary" onclick="showCreateMultiCommandModal()">
                            <svg viewBox="0 0 24 24" style="width: 16px; height: 16px;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 6.878V6a2.25 2.25 0 012.25-2.25h7.5A2.25 2.25 0 0118 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .525.045.75.128m-12 0A2.25 2.25 0 004.5 9v.878m13.5-3A2.25 2.25 0 0119.5 9v.878m-15 0A2.25 2.25 0 004.5 12v6a2.25 2.25 0 002.25 2.25h10.5A2.25 2.25 0 0019.5 18v-6a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6z" />
                            </svg>
                            Мульти-команда
                        </button>
                        <button class="btn btn-primary" onclick="showCreateCommandModal()">
                            <svg viewBox="0 0 24 24" style="width: 16px; height: 16px;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                            </svg>
                            Создать команду
                        </button>
                    </div>
                </div>

                <div class="responsive-table">
                    <table class="table" id="commandsTable">
                        <thead>
                            <tr>
                                <th>Команда</th>
                                <th>Тип</th>
                                <th>Описание</th>
                                <th class="hidden-mobile">Статус</th>
                                <th class="hidden-tablet">Создана</th>
                                <th>Действия</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Команды загружаются через JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно создания/редактирования команды -->
    <div id="commandModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3 id="commandModalTitle">Создать команду</h3>
                <button class="modal-close" onclick="closeCommandModal()">&times;</button>
            </div>
            
            <form id="commandForm">
                <div class="form-group">
                    <label class="form-label">Название команды *</label>
                    <input type="text" id="commandName" class="form-input" placeholder="open_menu" required>
                    <div class="form-help">Название команды без слеша (например: open_menu, get_info, start_order)</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Тип команды</label>
                    <div style="display: flex; gap: 20px; margin-bottom: 12px;">
                        <div class="checkbox-group">
                            <div class="checkbox checked" id="commandTypeRegular" onclick="selectCommandType('regular')"></div>
                            <label for="commandTypeRegular" class="checkbox-label">Обычная команда</label>
                        </div>
                        <div class="checkbox-group">
                            <div class="checkbox" id="commandTypeMulti" onclick="selectCommandType('multi')"></div>
                            <label for="commandTypeMulti" class="checkbox-label">Мульти-команда</label>
                        </div>
                    </div>
                </div>

                <div class="form-group" id="parentCommandGroup" style="display: none;">
                    <label class="form-label">Родительская мульти-команда</label>
                    <select id="parentMultiCommand" class="form-select">
                        <option value="">Выберите мульти-команду</option>
                    </select>
                    <div class="form-help">Эта команда будет принадлежать выбранной мульти-команде</div>
                </div>

                <div class="form-group" id="externalCommandsGroup" style="display: none;">
                    <div class="checkbox-group">
                                                        <div class="checkbox checked" id="allowExternalCommands" onclick="toggleExternalCommands(this)"></div>
                                <label for="allowExternalCommands" class="checkbox-label">Разрешить обращение к внешним командам</label>
                    </div>
                    <div class="form-help">Если отключено, команды внутри этой мульти-команды не смогут обращаться к командам вне группы</div>
                </div>

                <div class="form-group">
                    <label class="form-label">Описание команды *</label>
                    <input type="text" id="commandDescription" class="form-input" placeholder="Открывает главное меню с кнопками" required>
                    <div class="form-help">Краткое описание того, что делает команда</div>
                </div>

                <div class="form-group">
                    <label class="form-label">JSON код команды *</label>
                    <textarea id="commandCode" class="form-textarea" rows="15" placeholder='Введите JSON код команды...' required>{
  "type": "menu",
  "text": "🏠 Главное меню\n\nВыберите нужное действие:",
  "buttons": [
    [{"text": "🛒 Каталог товаров", "callback_data": "catalog"}],
    [{"text": "📋 Мои заказы", "callback_data": "orders"}],
    [{"text": "📞 Связаться с поддержкой", "callback_data": "support"}],
    [{"text": "ℹ️ О компании", "callback_data": "about"}]
  ]
}</textarea>
                    <div class="form-help">
                        <strong>Пример структуры команды:</strong><br>
                        <code style="font-size: 12px; display: block; margin-top: 8px; padding: 8px; background: var(--bg-secondary); border-radius: 4px;">
{<br>
&nbsp;&nbsp;"type": "menu",<br>
&nbsp;&nbsp;"text": "Выберите действие:",<br>
&nbsp;&nbsp;"buttons": [<br>
&nbsp;&nbsp;&nbsp;&nbsp;[{"text": "🛒 Каталог", "callback_data": "catalog"}],<br>
&nbsp;&nbsp;&nbsp;&nbsp;[{"text": "📞 Поддержка", "callback_data": "support"}]<br>
&nbsp;&nbsp;]<br>
}
                        </code>
                    </div>
                </div>

                <div class="form-group">
                    <div class="checkbox-group">
                                                    <div class="checkbox checked" id="commandActive" onclick="toggleCommandActive(this)"></div>
                        <label for="commandActive" class="checkbox-label">Команда активна</label>
                    </div>
                    <div class="form-help">Активные команды доступны для выполнения ботом</div>
                </div>

                <div class="form-group" style="display: flex; gap: 12px; justify-content: flex-end; margin-top: 24px;">
                    <button type="button" class="btn btn-secondary" onclick="closeCommandModal()">Отмена</button>
                    <button type="submit" class="btn btn-primary" id="commandSubmitBtn">Создать команду</button>
                    <button type="button" class="btn btn-danger" id="deleteCommandBtn" style="display: none;" onclick="deleteCommand()">Удалить</button>
                </div>
            </form>
        </div>
    </div>



    <script src="assets/script.js"></script>
</body>
</html> 